"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var count=0;function noop(){}function jsonp(e,n,o){"function"==typeof n&&(o=n,n={});var t,c,r=(n=n||{}).prefix||"__jp",i=n.name||r+count++,u=n.param||"callback",p=null!=n.timeout?n.timeout:6e4,a=encodeURIComponent,s=document.getElementsByTagName("script")[0]||document.head;function f(){t.parentNode&&t.parentNode.removeChild(t),window[i]=noop,c&&clearTimeout(c)}return p&&(c=setTimeout(function(){f(),o&&o(new Error("Timeout"))},p)),window[i]=function(e){f(),o&&o(null,e)},e=(e+=(-1!==e.indexOf("?")?"&":"?")+u+"="+a(i)).replace("?&","?"),(t=document.createElement("script")).src=e,s&&s.parentNode&&s.parentNode.insertBefore(t,s),function(){window[i]&&f()}}function syncJsonp(r,i,u){return new Promise(function(o,t){var e=r;if(i&&"object"==typeof i){var n=/^.*(#[.*])^/;e.match(n)&&(e.replace(n,"$1"),e=e.replace(/#.*$/,"")),-1===e.indexOf("?")?e+="?":e.match(/&$/)||(e+="&");var c=[];Object.keys(i).forEach(function(e){c.push(e+"="+i[e])}),e=""+e+c.join("&")}jsonp(e,u,function(e,n){e?t(e):o(n)})})}exports.default=syncJsonp,exports.syncJsonp=syncJsonp;
